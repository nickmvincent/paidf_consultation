<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Flywheels and Public AI - 6&nbsp; Ethics and Compliance</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./01g_upstream.html" rel="next">
<link href="./01e_options_for_flywheel.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01a_intro.html">Concepts &amp; Rationale</a></li><li class="breadcrumb-item"><a href="./01f_ethics_compliance.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ethics and Compliance</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Data Flywheels and Public AI</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Concepts &amp; Rationale</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01a_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01b_why.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Why collect data?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01c_pipeworks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">A Democratic Data Pipeworks</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01d_leverage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Flywheels and Bargaining Power</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01e_options_for_flywheel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Flywheel design space</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01f_ethics_compliance.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ethics and Compliance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01g_upstream.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Upstream data and data contribution</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Case Study: Low friction peer production</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2a_mvp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">The OpenWebUI Action MVP</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2b_life_of_a_chat.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The Life of a Chat</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2c_terms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Terms and Privacy</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2d_faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Public AI Data Flywheel — User FAQ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2e_code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Code</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Updating this book</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3a_contributing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Contributing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3b_ai_guidelines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Guidelines for Using AI</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3c_future_directions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Future Directions</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix1_llm_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Appendix 1: LLM Data Schemas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix2_prefsig.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Appendix 2 — Preference Signals for AI Data Use (CC signals + IETF AI Preferences)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix3_example_legalterms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Appendix 3: LLM Policy Docs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix4_diffable_terms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Diffable Terms</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#ethics" id="toc-ethics" class="nav-link active" data-scroll-target="#ethics"><span class="header-section-number">6.1</span> Ethics</a>
  <ul class="collapse">
  <li><a href="#flywheel-particular-challenges" id="toc-flywheel-particular-challenges" class="nav-link" data-scroll-target="#flywheel-particular-challenges"><span class="header-section-number">6.1.1</span> Flywheel-particular challenges</a></li>
  <li><a href="#flywheel-specific-high-level-goals" id="toc-flywheel-specific-high-level-goals" class="nav-link" data-scroll-target="#flywheel-specific-high-level-goals"><span class="header-section-number">6.1.2</span> Flywheel-specific high-level goals</a></li>
  <li><a href="#levers-for-solving-these-ethics-challenges" id="toc-levers-for-solving-these-ethics-challenges" class="nav-link" data-scroll-target="#levers-for-solving-these-ethics-challenges"><span class="header-section-number">6.1.3</span> Levers for solving these ethics challenges</a></li>
  </ul></li>
  <li><a href="#compliance" id="toc-compliance" class="nav-link" data-scroll-target="#compliance"><span class="header-section-number">6.2</span> Compliance</a>
  <ul class="collapse">
  <li><a href="#risks" id="toc-risks" class="nav-link" data-scroll-target="#risks"><span class="header-section-number">6.2.1</span> Risks</a></li>
  </ul></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"><span class="header-section-number">6.3</span> Further reading:</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01a_intro.html">Concepts &amp; Rationale</a></li><li class="breadcrumb-item"><a href="./01f_ethics_compliance.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ethics and Compliance</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-ec" class="quarto-section-identifier"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ethics and Compliance</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Public AI data flywheels face numerous ethics and compliance challenges.</p>
<p>This mini-book does NOT provide specific legal advice. We do discuss and link to terms of service used by various platforms.</p>
<p>In Part 2, we provide some examples of platform specific data policy terms.</p>
<section id="ethics" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="ethics"><span class="header-section-number">6.1</span> Ethics</h2>
<section id="flywheel-particular-challenges" class="level3" data-number="6.1.1">
<h3 data-number="6.1.1" class="anchored" data-anchor-id="flywheel-particular-challenges"><span class="header-section-number">6.1.1</span> Flywheel-particular challenges</h3>
<p>There is a large literature on harms from AI and sociotechnical systems more generally. We provide a longer set of references at the end of this section.</p>
<p>The top ethics priority for a Public AI Data Flywheel (PAIDF) is figuring out informed consent, and balancing consent and friction. One worst case scenario for a public AI organization is that the flywheel is set up in a way that erodes user trust and ultimately hinders the broader public AI mission.</p>
<p>While designing ethical systems normally involves some degree of multiplicity (there is rarely a single “most ethical solution” for a given group of people), our overall stance is that informed consent can be achieved by maximizing user information about data use and taking a fundamentally opt-in approach.</p>
<p>Beyond consent, a number of other interesting ethics challenges arise. We describe them first, and then discuss the intersection between building an ethical flywheel and a compliant flywheel.</p>
<p>In particular, there are three flywheel specific concerns, that primarily stem from the very general nature of modern AI data.</p>
<p>First, it is possible that data that is contributed via the flywheel could create serious security concerns (contributing a chat that includes an injection attack). Second, data that is contributed could create privacy concerns (PII and sensitive strings, from email, names to API keys). And third, data that is contributed may be seen as expressively harmful or leading to representational harms. That is, some users might produce data that is very offensive to other users. This is likely inevitable in a large enough system, and so public AI flywheel designers must plan with values conflict in mind.</p>
<p>In short, when we open up a form to the world, people may enter things (even in good faith) that creates security risks, violates privacy, or violates social norms.</p>
<p>There are also a set of ethical risks that arise from downstream AI systems that we build/improve with flywheel data. While these are not the focus of this mini-book, it is critical to keep them in mind. A non-exhaustive list includes:</p>
<ul>
<li>allocative harms: outputs affect access to opportunities or resources (moderation, ranking, credit scores)</li>
<li>privacy harms at the model layer (distinct from data layer): re-identification, doxxing, accidental leakage of personal or sensitive data</li>
<li>security harms (distinct from data layer): prompt injection and data exfiltration via model behavior; poisoning of training or eval sets</li>
<li>IP and contract harms: misuse of copyrighted or licensed content; violations of platform terms</li>
<li>AI-driven expressive harms: a system produces content that demeans, stereotypes, or legitimizes abuse against some group</li>
<li>AI-driven representational harms: skewed data makes groups invisible or mischaracterized (e.g., images that underrepresent darker skin tones; code comments that assume a single gender)</li>
</ul>
</section>
<section id="flywheel-specific-high-level-goals" class="level3" data-number="6.1.2">
<h3 data-number="6.1.2" class="anchored" data-anchor-id="flywheel-specific-high-level-goals"><span class="header-section-number">6.1.2</span> Flywheel-specific high-level goals</h3>
<p>To balance these ethical challenges, we might organize our design around high-level goals that often appear in AI regulation and ethical discussions. These might include “purpose limitation” <span class="citation" data-cites="eu_gdpr_2016">(<a href="references.html#ref-eu_gdpr_2016" role="doc-biblioref">European Union 2016</a>)</span> (our flywheel should try to collect only data that is necessary for the stated task – evaluating and improving AI systems) and “proportionality” (we should weigh utility of data collection against the likelihood and severity of harm; to some extent, because the flywheel leans opt-in, some decision-making is delegated to contributors). Considering the more general set of AI harms above, we may also want to specifically acquire or filter data in a way that helps achieve fairness goals.</p>
<p>Typically, you will see works attempt to classify high-risk data which should be treated differently. Examples include:</p>
<ul>
<li>faces, voices, gait, or other biometrics</li>
<li>images of minors or contexts involving schools and hospitals <span class="citation" data-cites="coppa_ftc_2013 ferpa_ed_1974 hipaa_privacy_rule_2000">(<a href="references.html#ref-coppa_ftc_2013" role="doc-biblioref">Federal Trade Commission 2013</a>; <a href="references.html#ref-ferpa_ed_1974" role="doc-biblioref">U.S. Department of Education 1974</a>; <a href="references.html#ref-hipaa_privacy_rule_2000" role="doc-biblioref">U.S. Department of Health and Human Services 2000</a>)</span>.</li>
<li>intimate or medical contexts, support forums, addiction and mental health groups</li>
<li>government IDs, financial records, geolocation trails, and precise timestamps</li>
<li>credential artifacts: API keys, cookies, session tokens, SSH keys, access logs</li>
<li>content from communities with clear norms against scraping or model training</li>
</ul>
<p>A flywheel designer likely wants to avoid collecting this kind of data, but getting 100% precision will be nearly impossible, because some of the most interesting AI outputs (especially failure cases) may involve high-stakes scenarios. A flywheel that completely bans contributions related to cybersecurity or human health risks collecting “excessively bland” data.</p>
</section>
<section id="levers-for-solving-these-ethics-challenges" class="level3" data-number="6.1.3">
<h3 data-number="6.1.3" class="anchored" data-anchor-id="levers-for-solving-these-ethics-challenges"><span class="header-section-number">6.1.3</span> Levers for solving these ethics challenges</h3>
<p>The flywheel designer can use several avenues for attempting to pre-empt some of the above challenges. In terms of informed consent, this comes down to the implementation of a usable, informative module for consent and the exact UX for opting in and out. In terms of security and privacy, this mainly comes down to implementing filtering/curation at various stages. In terms of values conflict, the designer may employ filtering, but also take a normative or sociotechnical approach (leaning on peer production-style talk pages, moderation, community-generated rules, etc.).</p>
<p>The designer has the least leverage to directly control downstream model harms, but can have some influence via further training data filtering, helping to document data produced by the flywheel, etc.</p>
</section>
</section>
<section id="compliance" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="compliance"><span class="header-section-number">6.2</span> Compliance</h2>
<p>In general, data protection regimes impose responsibilities on anyone operating a platform.</p>
<p>Most likely, any public AI data flywheel will also be connected to some frontend (e.g., hosted OpenWebUI instance) and some backend (model provider). These distinct systems are likely to have their own data-related responsibilities, depending on exactly how they hold or process data.</p>
<section id="risks" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="risks"><span class="header-section-number">6.2.1</span> Risks</h3>
<p>In terms of compliance risks, some issues may emerge because of contributor mistakes: users may post personal data that evades whatever filtering/curation the designer has implemented. In some way, PII, secrets, or identifiers may make it into the flywheel’s data repo. Further, even when users make contributions via pseudonym, unique phrasing, contextual clues, etc. can deanonymize. If we use salted contributor hashes, these are still stable identifiers across contributions which creates some small risk as well.</p>
<p>In general, a major risk with an approach that creates publicly accessible data is the potential for permanence via forks and mirrors. Removed data can persist in external forks, local clones, or third-party mirrors outside this project’s control. Further, while repo history can be rewritten and monthly files reissued, but downstream models may already have trained; unlearning is best-effort and not guaranteed.</p>
<p>Risks may also stem from the use of various vendors. Hosting providers (e.g.&nbsp;Vercel and similar services, any caching databases uses, any APIs used) may retain request logs; this could be outside the flywheel designer’s control.</p>
<p>In some cases, contributions that create “security-related ethical risks” (e.g.&nbsp;a chat in which an LLM provides instruction for conducting some kind of attack) could also create compliance risks. This creates some continuous burden on maintainers. The same is true of offensive content or privacy violations. Even with consent and public repos, some jurisdictions treat certain content types as sensitive or restricted.</p>
</section>
</section>
<section id="further-reading" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="further-reading"><span class="header-section-number">6.3</span> Further reading:</h2>
<p>First: works that taxonomize harms <span class="citation" data-cites="shelby weidinger_risks_2021 blodgett_language_2020">(<a href="references.html#ref-shelby" role="doc-biblioref">Shelby et al. 2023</a>; <a href="references.html#ref-weidinger_risks_2021" role="doc-biblioref">Weidinger, Mellor, et al. 2021</a>; <a href="references.html#ref-blodgett_language_2020" role="doc-biblioref">Blodgett et al. 2020</a>)</span></p>
<p>Allocative harms: outputs affect access to opportunities or resources (moderation, ranking, credit-like inferences) <span class="citation" data-cites="barocas_selbst_big_data_2016 obermeyer_bias_health_2019">(<a href="references.html#ref-barocas_selbst_big_data_2016" role="doc-biblioref">Barocas and Selbst 2016</a>; <a href="references.html#ref-obermeyer_bias_health_2019" role="doc-biblioref">Obermeyer et al. 2019</a>)</span>.</p>
<p>Works that discuss expressive harms and representative harms <span class="citation" data-cites="shelby weidinger_risks_2021 buolamwini_gender_shades_2018 grother_frvt_demographics_2019 crawford_paglen_excavating_ai_2019 blodgett_language_2020">(<a href="references.html#ref-shelby" role="doc-biblioref">Shelby et al. 2023</a>; <a href="references.html#ref-weidinger_risks_2021" role="doc-biblioref">Weidinger, Mellor, et al. 2021</a>; <a href="references.html#ref-buolamwini_gender_shades_2018" role="doc-biblioref">Buolamwini and Gebru 2018</a>; <a href="references.html#ref-grother_frvt_demographics_2019" role="doc-biblioref">Grother, Ngan, and Hanaoka 2019</a>; <a href="references.html#ref-crawford_paglen_excavating_ai_2019" role="doc-biblioref">Crawford and Paglen 2019</a>; <a href="references.html#ref-blodgett_language_2020" role="doc-biblioref">Blodgett et al. 2020</a>)</span>.</p>
<p>On data that has actual security concerns (contributing a chat that includes an injection attack) <span class="citation" data-cites="owasp_llm_top10_2023 hubinger2024sleeperagentstrainingdeceptive carlini2024poisoningwebscaletrainingdatasets">(<a href="references.html#ref-owasp_llm_top10_2023" role="doc-biblioref">OWASP 2023</a>; <a href="references.html#ref-hubinger2024sleeperagentstrainingdeceptive" role="doc-biblioref">Hubinger et al. 2024</a>; <a href="references.html#ref-carlini2024poisoningwebscaletrainingdatasets" role="doc-biblioref">Carlini et al. 2024</a>)</span>.</p>
<p>On PII and sensitive strings (from email, names to API keys) <span class="citation" data-cites="carlini_secret_sharer_2019 carlini_extracting_training_data_2021">(<a href="references.html#ref-carlini_secret_sharer_2019" role="doc-biblioref">Carlini et al. 2019</a>, <a href="references.html#ref-carlini_extracting_training_data_2021" role="doc-biblioref">2021</a>)</span>.</p>
<p>Reg and legal examples: <span class="citation" data-cites="nist_sp800_122_2010 eu_gdpr_2016 illinois_bipa_2008 rosenbach_v_six_flags_2019">(<a href="references.html#ref-nist_sp800_122_2010" role="doc-biblioref">McCallister, Grance, and Scarfone 2010</a>; <a href="references.html#ref-eu_gdpr_2016" role="doc-biblioref">European Union 2016</a>; <a href="references.html#ref-illinois_bipa_2008" role="doc-biblioref">Illinois General Assembly 2008</a>; <a href="references.html#ref-rosenbach_v_six_flags_2019" role="doc-biblioref"><span>“Rosenbach v. Six Flags Entertainment Corp.”</span> 2019</a>)</span>.</p>
<ul>
<li>privacy harms: re-identification, doxxing, accidental leakage of personal or sensitive data <span class="citation" data-cites="sweeney_reidentification_2000 narayanan_shmatikov_2008">(<a href="references.html#ref-sweeney_reidentification_2000" role="doc-biblioref">Sweeney 2000</a>; <a href="references.html#ref-narayanan_shmatikov_2008" role="doc-biblioref">Narayanan and Shmatikov 2008</a>)</span></li>
</ul>
<p>Further reading on:</p>
<ul>
<li><p>proportionality: weigh utility against the likelihood and severity of harm <span class="citation" data-cites="iso_23894_2023 nist_ai_rmf_2023">(<a href="references.html#ref-iso_23894_2023" role="doc-biblioref"><em>ISO/IEC 23894:2023 Information Technology—Artificial Intelligence—Risk Management</em> 2023</a>; <a href="references.html#ref-nist_ai_rmf_2023" role="doc-biblioref">NIST 2023</a>)</span>.</p></li>
<li><p>respect for context: treat data according to the social norms of its origin community <span class="citation" data-cites="nissenbaum_contextual_integrity_2004 jo_gebru_archives_2020">(<a href="references.html#ref-nissenbaum_contextual_integrity_2004" role="doc-biblioref">Nissenbaum 2004</a>; <a href="references.html#ref-jo_gebru_archives_2020" role="doc-biblioref">Jo and Gebru 2020</a>)</span>.</p></li>
<li><p>transparency: explain collection, uses, and the limits of control in clear language <span class="citation" data-cites="mitchell_model_cards_2019 gebru_datasheets_2018 holland2018datasetnutritionlabelframework">(<a href="references.html#ref-mitchell_model_cards_2019" role="doc-biblioref">Mitchell et al. 2019</a>; <a href="references.html#ref-gebru_datasheets_2018" role="doc-biblioref">Gebru et al. 2018</a>; <a href="references.html#ref-holland2018datasetnutritionlabelframework" role="doc-biblioref">Holland et al. 2018</a>)</span>.</p></li>
<li><p>accountability: assign owners, metrics, and escalation paths <span class="citation" data-cites="nist_ai_rmf_2023 eu_ai_act_2024">(<a href="references.html#ref-nist_ai_rmf_2023" role="doc-biblioref">NIST 2023</a>; <a href="references.html#ref-eu_ai_act_2024" role="doc-biblioref">European Union 2024</a>)</span>.</p></li>
<li><p>fairness and non-discrimination: measure and mitigate disparate impacts <span class="citation" data-cites="barocas_selbst_big_data_2016 selbst_fairness_abstraction_2019 obermeyer_bias_health_2019 bender_stochastic_parrots_2021">(<a href="references.html#ref-barocas_selbst_big_data_2016" role="doc-biblioref">Barocas and Selbst 2016</a>; <a href="references.html#ref-selbst_fairness_abstraction_2019" role="doc-biblioref">Selbst et al. 2019</a>; <a href="references.html#ref-obermeyer_bias_health_2019" role="doc-biblioref">Obermeyer et al. 2019</a>; <a href="references.html#ref-bender_stochastic_parrots_2021" role="doc-biblioref">Bender et al. 2021</a>)</span>.</p></li>
<li><p>security harms: prompt injection and data exfiltration via model behavior; poisoning of training or eval sets <span class="citation" data-cites="owasp_llm_top10_2023 carlini2024poisoningwebscaletrainingdatasets">(<a href="references.html#ref-owasp_llm_top10_2023" role="doc-biblioref">OWASP 2023</a>; <a href="references.html#ref-carlini2024poisoningwebscaletrainingdatasets" role="doc-biblioref">Carlini et al. 2024</a>)</span>.</p></li>
<li><p>IP and contract harms: misuse of copyrighted or licensed content; violations of platform terms <span class="citation" data-cites="us_copyright_office_ai_2024 cc_ai_and_cc_2023">(<a href="references.html#ref-us_copyright_office_ai_2024" role="doc-biblioref">U.S. Copyright Office 2024</a>; <a href="references.html#ref-cc_ai_and_cc_2023" role="doc-biblioref">Creative Commons 2023</a>)</span>.</p></li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-barocas_selbst_big_data_2016" class="csl-entry" role="listitem">
Barocas, Solon, and Andrew D. Selbst. 2016. <span>“Big Data’s Disparate Impact.”</span> <em>California Law Review</em> 104 (3): 671–732.
</div>
<div id="ref-bender_stochastic_parrots_2021" class="csl-entry" role="listitem">
Bender, Emily M., Timnit Gebru, Angelina McMillan-Major, and Shmargaret Shmitchell. 2021. <span>“On the Dangers of Stochastic Parrots: Can Language Models Be Too Big?”</span> In <em>Proceedings of the ACM Conference on Fairness, Accountability, and Transparency (FAccT)</em>, 610–23.
</div>
<div id="ref-blodgett_language_2020" class="csl-entry" role="listitem">
Blodgett, Su Lin, Solon Barocas, Hal Daumé III, and Hanna Wallach. 2020. <span>“Language (Technology) Is Power: A Critical Survey of <span>‘Bias’</span> in NLP.”</span> In <em>Proceedings of ACL</em>, 5454–76.
</div>
<div id="ref-buolamwini_gender_shades_2018" class="csl-entry" role="listitem">
Buolamwini, Joy, and Timnit Gebru. 2018. <span>“Gender Shades: Intersectional Accuracy Disparities in Commercial Gender Classification.”</span> In <em>Proceedings of the Conference on Fairness, Accountability and Transparency (FAT*)</em>, 77–91.
</div>
<div id="ref-carlini2024poisoningwebscaletrainingdatasets" class="csl-entry" role="listitem">
Carlini, Nicholas, Matthew Jagielski, Christopher A. Choquette-Choo, Daniel Paleka, Will Pearce, Hyrum Anderson, Andreas Terzis, Kurt Thomas, and Florian Tramèr. 2024. <span>“Poisoning Web-Scale Training Datasets Is Practical.”</span> <a href="https://arxiv.org/abs/2302.10149">https://arxiv.org/abs/2302.10149</a>.
</div>
<div id="ref-carlini_secret_sharer_2019" class="csl-entry" role="listitem">
Carlini, Nicholas, Chang Liu, Úlfar Erlingsson, Jernej Kos, and Dawn Song. 2019. <span>“The Secret Sharer: Measuring Unintended Memorization in Neural Networks.”</span> In <em>Proceedings of USENIX Security Symposium</em>.
</div>
<div id="ref-carlini_extracting_training_data_2021" class="csl-entry" role="listitem">
Carlini, Nicholas, Florian Tramer, Eric Wallace, Matthew Jagielski, Ariel Herbert-Voss, Katherine Lee, Adam Roberts, et al. 2021. <span>“Extracting Training Data from Large Language Models.”</span> In <em>Proceedings of USENIX Security Symposium</em>.
</div>
<div id="ref-crawford_paglen_excavating_ai_2019" class="csl-entry" role="listitem">
Crawford, Kate, and Trevor Paglen. 2019. <span>“Excavating AI: The Politics of Images in Machine Learning Training Sets.”</span> <a href="https://www.excavating.ai/" class="uri">https://www.excavating.ai/</a>.
</div>
<div id="ref-cc_ai_and_cc_2023" class="csl-entry" role="listitem">
Creative Commons. 2023. <span>“Understanding CC Licenses and Generative AI.”</span> <a href="https://creativecommons.org/2023/08/18/understanding-cc-licenses-and-generative-ai/" class="uri">https://creativecommons.org/2023/08/18/understanding-cc-licenses-and-generative-ai/</a>.
</div>
<div id="ref-eu_gdpr_2016" class="csl-entry" role="listitem">
European Union. 2016. <span>“General Data Protection Regulation (EU) 2016/679.”</span> <a href="https://eur-lex.europa.eu/eli/reg/2016/679/oj" class="uri">https://eur-lex.europa.eu/eli/reg/2016/679/oj</a>.
</div>
<div id="ref-eu_ai_act_2024" class="csl-entry" role="listitem">
———. 2024. <span>“Artificial Intelligence Act.”</span> <a href="https://eur-lex.europa.eu/" class="uri">https://eur-lex.europa.eu/</a>.
</div>
<div id="ref-coppa_ftc_2013" class="csl-entry" role="listitem">
Federal Trade Commission. 2013. <span>“Children’s Online Privacy Protection Rule (COPPA) — 16 CFR Part 312.”</span> <a href="https://www.ftc.gov/legal-library/browse/rules/childrens-online-privacy-protection-rule-coppa" class="uri">https://www.ftc.gov/legal-library/browse/rules/childrens-online-privacy-protection-rule-coppa</a>.
</div>
<div id="ref-gebru_datasheets_2018" class="csl-entry" role="listitem">
Gebru, Timnit, Jamie Morgenstern, Briana Vecchione, Jennifer Wortman Vaughan, Hanna Wallach, Hal Daumé III, and Kate Crawford. 2018. <span>“Datasheets for Datasets.”</span> In <em>arXiv:1803.09010</em>.
</div>
<div id="ref-grother_frvt_demographics_2019" class="csl-entry" role="listitem">
Grother, Patrick, Mei Ngan, and Kayee Hanaoka. 2019. <span>“Face Recognition Vendor Test (FRVT) Part 3: Demographic Effects.”</span> NISTIR 8280. NIST. <a href="https://doi.org/10.6028/NIST.IR.8280">https://doi.org/10.6028/NIST.IR.8280</a>.
</div>
<div id="ref-holland2018datasetnutritionlabelframework" class="csl-entry" role="listitem">
Holland, Sarah, Ahmed Hosny, Sarah Newman, Joshua Joseph, and Kasia Chmielinski. 2018. <span>“The Dataset Nutrition Label: A Framework to Drive Higher Data Quality Standards.”</span> <a href="https://arxiv.org/abs/1805.03677">https://arxiv.org/abs/1805.03677</a>.
</div>
<div id="ref-hubinger2024sleeperagentstrainingdeceptive" class="csl-entry" role="listitem">
Hubinger, Evan, Carson Denison, Jesse Mu, Mike Lambert, Meg Tong, Monte MacDiarmid, Tamera Lanham, et al. 2024. <span>“Sleeper Agents: Training Deceptive LLMs That Persist Through Safety Training.”</span> <a href="https://arxiv.org/abs/2401.05566">https://arxiv.org/abs/2401.05566</a>.
</div>
<div id="ref-illinois_bipa_2008" class="csl-entry" role="listitem">
Illinois General Assembly. 2008. <span>“Biometric Information Privacy Act (BIPA), 740 ILCS 14.”</span> <a href="https://www.ilga.gov/legislation/ilcs/ilcs3.asp?ActID=3004" class="uri">https://www.ilga.gov/legislation/ilcs/ilcs3.asp?ActID=3004</a>.
</div>
<div id="ref-iso_23894_2023" class="csl-entry" role="listitem">
<em>ISO/IEC 23894:2023 Information Technology—Artificial Intelligence—Risk Management</em>. 2023. ISO/IEC.
</div>
<div id="ref-jo_gebru_archives_2020" class="csl-entry" role="listitem">
Jo, Emily, and Timnit Gebru. 2020. <span>“Lessons from Archives: Strategies for Collecting Sociocultural Data in Machine Learning.”</span> In <em>Proceedings of FAccT</em>, 306–16.
</div>
<div id="ref-nist_sp800_122_2010" class="csl-entry" role="listitem">
McCallister, Erika, Tim Grance, and Karen Scarfone. 2010. <span>“Guide to Protecting the Confidentiality of Personally Identifiable Information (PII).”</span> SP 800-122. NIST.
</div>
<div id="ref-mitchell_model_cards_2019" class="csl-entry" role="listitem">
Mitchell, Margaret, Simone Wu, Andrew Zaldivar, Parker Barnes, Lucy Vasserman, Ben Hutchinson, Elena Spitzer, Inioluwa Deborah Raji, and Timnit Gebru. 2019. <span>“Model Cards for Model Reporting.”</span> In <em>Proceedings of the ACM Conference on Fairness, Accountability, and Transparency (FAccT)</em>, 220–29.
</div>
<div id="ref-narayanan_shmatikov_2008" class="csl-entry" role="listitem">
Narayanan, Arvind, and Vitaly Shmatikov. 2008. <span>“Robust de-Anonymization of Large Sparse Datasets.”</span> In <em>Proceedings of the IEEE Symposium on Security and Privacy</em>, 111–25.
</div>
<div id="ref-nissenbaum_contextual_integrity_2004" class="csl-entry" role="listitem">
Nissenbaum, Helen. 2004. <span>“Privacy as Contextual Integrity.”</span> <em>Washington Law Review</em> 79 (1): 119–57.
</div>
<div id="ref-nist_ai_rmf_2023" class="csl-entry" role="listitem">
NIST. 2023. <span>“Artificial Intelligence Risk Management Framework (AI RMF 1.0).”</span> NIST AI 100-1. National Institute of Standards; Technology; <a href="https://www.nist.gov/ai" class="uri">https://www.nist.gov/ai</a>.
</div>
<div id="ref-obermeyer_bias_health_2019" class="csl-entry" role="listitem">
Obermeyer, Ziad, Brian Powers, Christine Vogeli, and Sendhil Mullainathan. 2019. <span>“Dissecting Racial Bias in an Algorithm Used to Manage the Health of Populations.”</span> <em>Science</em> 366 (6464): 447–53.
</div>
<div id="ref-owasp_llm_top10_2023" class="csl-entry" role="listitem">
OWASP. 2023. <span>“OWASP Top 10 for Large Language Model Applications.”</span> <a href="https://owasp.org/www-project-top-10-for-large-language-model-applications/" class="uri">https://owasp.org/www-project-top-10-for-large-language-model-applications/</a>.
</div>
<div id="ref-rosenbach_v_six_flags_2019" class="csl-entry" role="listitem">
<span>“Rosenbach v. Six Flags Entertainment Corp.”</span> 2019. 2019 IL 123186, Supreme Court of Illinois.
</div>
<div id="ref-selbst_fairness_abstraction_2019" class="csl-entry" role="listitem">
Selbst, Andrew D., Danah Boyd, Suresh Venkatasubramanian Friedler, Suresh Venkatasubramanian, and Janet Vertesi. 2019. <span>“Fairness and Abstraction in Sociotechnical Systems.”</span> In <em>Proceedings of the ACM Conference on Fairness, Accountability, and Transparency (FAccT)</em>, 59–68.
</div>
<div id="ref-shelby" class="csl-entry" role="listitem">
Shelby, Renee, Shalaleh Rismani, Kathryn Henne, AJung Moon, Negar Rostamzadeh, Paul Nicholas, N’Mah Yilla-Akbari, et al. 2023. <span>“Sociotechnical Harms of Algorithmic Systems: Scoping a Taxonomy for Harm Reduction.”</span> In <em>Proceedings of the 2023 AAAI/ACM Conference on AI, Ethics, and Society</em>, 723–41. AIES ’23. New York, NY, USA: Association for Computing Machinery. <a href="https://doi.org/10.1145/3600211.3604673">https://doi.org/10.1145/3600211.3604673</a>.
</div>
<div id="ref-sweeney_reidentification_2000" class="csl-entry" role="listitem">
Sweeney, Latanya. 2000. <span>“Simple Demographics Often Identify People Uniquely.”</span> <em>Carnegie Mellon University, Data Privacy Working Paper</em>.
</div>
<div id="ref-us_copyright_office_ai_2024" class="csl-entry" role="listitem">
U.S. Copyright Office. 2024. <span>“Copyright and Artificial Intelligence: Policy Studies and Guidance.”</span> <a href="https://copyright.gov/ai/" class="uri">https://copyright.gov/ai/</a>.
</div>
<div id="ref-ferpa_ed_1974" class="csl-entry" role="listitem">
U.S. Department of Education. 1974. <span>“Family Educational Rights and Privacy Act (FERPA).”</span> <a href="https://www2.ed.gov/policy/gen/guid/fpco/ferpa/index.html" class="uri">https://www2.ed.gov/policy/gen/guid/fpco/ferpa/index.html</a>.
</div>
<div id="ref-hipaa_privacy_rule_2000" class="csl-entry" role="listitem">
U.S. Department of Health and Human Services. 2000. <span>“HIPAA Privacy Rule — 45 CFR Parts 160 and 164.”</span> <a href="https://www.hhs.gov/hipaa/for-professionals/privacy/index.html" class="uri">https://www.hhs.gov/hipaa/for-professionals/privacy/index.html</a>.
</div>
<div id="ref-weidinger_risks_2021" class="csl-entry" role="listitem">
Weidinger, Laura, John Mellor, et al. 2021. <span>“Ethical and Social Risks of Harm from Language Models.”</span> <em>arXiv Preprint arXiv:2112.04359</em>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./01e_options_for_flywheel.html" class="pagination-link  aria-label=" &lt;span="" design="" space&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Flywheel design space</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./01g_upstream.html" class="pagination-link" aria-label="<span class='chapter-number'>7</span>&nbsp; <span class='chapter-title'>Upstream data and data contribution</span>">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Upstream data and data contribution</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>